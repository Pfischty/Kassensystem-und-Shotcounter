{% extends "base.html" %}
{% block title %}Kasse{% endblock %}
{% block content %}
<h1>Kassensystem – {{ event.name }}</h1>

<style>
  .cashier-grid {
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(180px, 1fr));
    gap:0.8rem;
  }
  .cashier-tile {
    background:#1f2a44;
    border:1px solid var(--border);
    border-radius:10px;
    padding:1rem;
    height:100%;
    display:flex;
    flex-direction:column;
    justify-content:center;
    gap:.3rem;
    color:#e2e8f0;
    box-shadow:0 8px 20px rgba(0,0,0,0.25);
    transition: transform 0.12s ease, box-shadow 0.12s ease;
  }
  .cashier-tile:hover { transform: translateY(-2px); box-shadow:0 12px 30px rgba(0,0,0,0.3); }
</style>

<div class="card">
  <div style="display:flex; align-items:center; justify-content: space-between; flex-wrap: wrap; gap: .6rem;">
    <div>
      <div class="badge badge-blue">Aktives Event</div>
      <div style="font-size:1.4rem; margin-top:0.4rem;">Total: <strong>{{ total }}</strong> CHF</div>
    </div>
    <div style="display:flex; gap:0.5rem; flex-wrap: wrap;">
      <a href="{{ url_for('remove_last') }}"><button class="secondary">1 zurück</button></a>
      <a href="{{ url_for('checkout') }}"><button>Bestellung abschließen</button></a>
      <a href="{{ url_for('cashier_stats') }}"><button class="secondary">Statistik</button></a>
    </div>
  </div>

  <div style="margin-top:0.8rem;">
    <h3>Bestellliste</h3>
    {% if items %}
      <ul style="columns:2; list-style:none; padding-left:0;">
        {% for item, qty in items %}
          <li>{{ qty }}× {{ item }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Noch keine Artikel im Warenkorb.</p>
    {% endif %}
  </div>
</div>

<div class="card">
  <h2>Artikel</h2>
  <div class="cashier-grid">
    {% for button in buttons %}
      <a href="{{ url_for('add_item') }}?name={{ button.name }}" style="text-decoration:none;">
        <div class="cashier-tile" style="background: {{ button.color or '#1f2a44' }};">
          <div style="font-weight:700;">{{ button.label }}</div>
          <div style="opacity:0.8;">{{ button.price }} CHF</div>
        </div>
      </a>
    {% endfor %}
  </div>
</div>
{% endblock %}
