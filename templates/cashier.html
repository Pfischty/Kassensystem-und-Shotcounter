{% extends "base.html" %}
{% block title %}Kasse{% endblock %}
{% block content %}
<h1>Kassensystem – {{ event.name }}</h1>

<div class="card">
  <div style="display:flex; align-items:center; justify-content: space-between; flex-wrap: wrap; gap: .6rem;">
    <div>
      <div class="badge badge-blue">Aktives Event</div>
      <div style="font-size:1.4rem; margin-top:0.4rem;">Total: <strong>{{ total }}</strong> CHF</div>
    </div>
    <div style="display:flex; gap:0.5rem; flex-wrap: wrap;">
      <a href="{{ url_for('remove_last') }}"><button class="secondary">1 zurück</button></a>
      <a href="{{ url_for('checkout') }}"><button>Bestellung abschließen</button></a>
      <a href="{{ url_for('cashier_stats') }}"><button class="secondary">Statistik</button></a>
    </div>
  </div>

  <div style="margin-top:0.8rem;">
    <h3>Bestellliste</h3>
    {% if items %}
      <ul style="columns:2; list-style:none; padding-left:0;">
        {% for item, qty in items %}
          <li>{{ qty }}× {{ item }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Noch keine Artikel im Warenkorb.</p>
    {% endif %}
  </div>
</div>

<div class="card">
  <h2>Artikel</h2>
  <div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(180px, 1fr)); gap:0.8rem;">
    {% for button in buttons %}
      <a href="{{ url_for('add_item') }}?name={{ button.name }}" style="text-decoration:none;">
        <div style="background:#1f2a44; border:1px solid var(--border); border-radius:10px; padding:1rem; height:100%; display:flex; flex-direction:column; justify-content:center; gap:.3rem;">
          <div style="font-weight:700;">{{ button.label }}</div>
          <div style="opacity:0.8;">{{ button.price }} CHF</div>
        </div>
      </a>
    {% endfor %}
  </div>
</div>
{% endblock %}
