{% extends "base.html" %}
{% block title %}Übersicht{% endblock %}
{% block content %}
<h1>Übersicht</h1>

<div class="card">
  <h2>Aktuelles Event</h2>
  {% if active_event %}
    <p><strong>{{ active_event.name }}</strong></p>
    <p>
      Kassensystem: {% if active_event.kassensystem_enabled %}<span class="badge badge-green">aktiv</span>{% else %}<span class="badge badge-red">aus</span>{% endif %}
      &nbsp;|&nbsp;
      Shotcounter: {% if active_event.shotcounter_enabled %}<span class="badge badge-green">aktiv</span>{% else %}<span class="badge badge-red">aus</span>{% endif %}
    </p>
    <div style="display:flex; gap:0.6rem; flex-wrap: wrap;">
      <a href="{{ url_for('cashier') }}"><button>Zur Kasse</button></a>
      <a href="{{ url_for('shotcounter') }}"><button class="secondary">Zum Shotcounter</button></a>
      <a href="{{ url_for('admin') }}"><button class="secondary">Einstellungen</button></a>
    </div>
  {% else %}
    <p>Kein aktives Event. Bitte im Adminbereich aktivieren.</p>
    <a href="{{ url_for('admin') }}"><button>Zum Adminbereich</button></a>
  {% endif %}
</div>

<div class="card">
  <h2>Alle Events</h2>
  {% if not events %}
    <p>Noch keine Events vorhanden.</p>
  {% endif %}
  <table>
    <tr><th>Name</th><th>Status</th><th>Erstellt</th></tr>
    {% for event in events %}
      <tr>
        <td>{{ event.name }}</td>
        <td>
          {% if event.is_active %}<span class="badge badge-green">aktiv</span>{% elif event.is_archived %}<span class="badge badge-red">archiviert</span>{% else %}<span class="badge badge-blue">bereit</span>{% endif %}
        </td>
        <td>{{ event.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
      </tr>
    {% endfor %}
  </table>
</div>

{% endblock %}
